<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Finance Buddy</title>
    <meta name="description" content="Personal finance is fun! :)">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link href="../bootstrap/css/bootstrap.css" rel="stylesheet">
    <link type="text/css" href="../bootstrap/css/custom-theme/jquery-ui-1.9.2.custom.css" rel="stylesheet">
    <link rel="stylesheet" href="../bootstrap/css/ui.daterangepicker.css" type="text/css" />

    <script src="../bootstrap/js/jquery-1.6.2.min.js"></script>
    <script src="../bootstrap/js/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="../bootstrap/js/date.js"></script>
    <script type="text/javascript" src="../bootstrap/js/daterangepicker.jQuery.js"></script>

    <script language="javascript">

      /* Navigation; switching between main views. */

      function resetNav() {
        $("#details-main").get(0).style.display = "none";
        $("#overview-main").get(0).style.display = "none";
        $("#schedule-main").get(0).style.display = "none";
        $("#settings-main").get(0).style.display = "none";

        $("#nav-details").get(0).className = "";
        $("#nav-overview").get(0).className = "";
        $("#nav-schedule").get(0).className = "";
        $("#nav-settings").get(0).className = "";

        $("#navbar-search").get(0).style.display = "none";
        $("#navbar-overview-config").get(0).style.display = "none";
      }

      function onDetailsClick() {
        resetNav();
        $("#details-main").get(0).style.display = "block";
        $("#nav-details").get(0).className = "active";
        $("#navbar-search").get(0).style.display = "block";
      }

      function onOverviewClick() {
        resetNav();
        $("#overview-main").get(0).style.display = "block";
        $("#nav-overview").get(0).className = "active";
        $("#navbar-overview-config").get(0).style.display = "block";
				selectCategory();
      }

      function onScheduleClick() {
        resetNav();
        $("#schedule-main").get(0).style.display = "block";
        $("#nav-schedule").get(0).className = "active";
        $("#navbar-search").get(0).style.display = "block";
				selectCategory();
      }

      function onSettingsClick() {
        resetNav();
        $("#settings-main").get(0).style.display = "block";
        $("#nav-settings").get(0).className = "active";
				clearAlerts();
      }

      /* Pops up the advanced search dialog. */

      function onAdvancedSearchClick() {
        $("#advanced-search-dialog").dialog("open");
      }

      $(function() {
        $("#advanced-search-dialog").dialog({
          autoOpen: false,
          height: 300,
          width: 350,
          position: { my: "left bottom", at: "left top", of: "#advanced-search" },
          modal: true});
      });

      /* Overview page. */

      function onOverviewConfigClick() {
        if(document.getElementById("optionSideBySide").checked == true) {
          document.getElementById("picture_1").style.display = "none";
          document.getElementById("picture_2").style.display = "block";
        } else {
          document.getElementById("picture_1").style.display = "block";
          document.getElementById("picture_2").style.display = "none";
        }
      }

      $(function() {
        $("#periodFrom, #periodTo").daterangepicker();
      });

      /* Settings page. */

      function onSaveSettingsClick() {
        if(isBudgetLimitEmpty()) {
					clearAlerts();
          document.getElementById("alert-error-field-is-empty").style.display = "block";
        } else if (isNaN(document.getElementById("inputBudgetLimit").value)) {
					clearAlerts();
          document.getElementById("alert-error-field-is-not-a-number").style.display = "block";
        } else if(document.getElementById("inputBudgetLimit").value < 0) {
					clearAlerts();
          document.getElementById("alert-error-field-is-shorter-zero").style.display = "block";
        } else {
					clearAlerts();
          document.getElementById("alert-success").style.display = "block";
        }
      }

			function checkBudgetLimitInput() {
        if(isNaN(document.getElementById("inputBudgetLimit").value)) {
					clearAlerts();
          document.getElementById("alert-error-field-is-not-a-number").style.display = "block";
        } else if(document.getElementById("inputBudgetLimit").value < 0) {
					clearAlerts();
          document.getElementById("alert-error-field-is-shorter-zero").style.display = "block";
				} else {
					clearAlerts();
				}
			}
	
			function clearAlertSuccess() {
          document.getElementById("alert-success").style.display = "none";
			}

			function clearAlerts() {
          document.getElementById("alert-error-field-is-shorter-zero").style.display = "none";
          document.getElementById("alert-error-field-is-empty").style.display = "none";
          document.getElementById("alert-error-field-is-not-a-number").style.display = "none";
          document.getElementById("alert-success").style.display = "none";
			}

      function isBudgetLimitEmpty() {
        return (document.getElementById("inputBudgetLimit").value == "");
      }
	
      function selectCategory() {
        var index = document.getElementById("selectedCategory").selectedIndex;
				
        if (document.getElementById("selectedCategory").options[index].text == "All") {
          document.getElementById('optionSideBySide').disabled = false;
          document.getElementById('optionOneAboveTheOther').disabled = false;
        } else {
          document.getElementById("optionSideBySide").disabled = true;
          document.getElementById("optionOneAboveTheOther").disabled = true;
        }
      }

      /* Details page */

      var categories = ["Rent","Power","Heating","Water","Food","Misc Stuff"];

      $(function() {
        $("#newExpenseDate").datepicker();
        /* Not working with the old jquery required by our bootstrap theme.
        $("#newExpenseCategory").typeahead({
          source: categories,
        });
        */
      });
		
      function onNewEntry() {
        if (document.getElementById("newExpenseDesc").value == "" ||
          document.getElementById("newExpenseCategory").value == "" ||
          document.getElementById("newExpenseDate").value == "" ||
          ! /^[0-9]+(\.[0-9][0-9]?)?$/.test(document.getElementById("newExpenseAmount").value)) {
          document.getElementById("alert-error-new-expense").style.display = "block";
        } else {
          document.getElementById("alert-error-new-expense").style.display = "none";
          document.forms['newExpense'].submit();
        }
      }

      function onNewExpenseClick() {
        $("#new-expense-dialog").dialog("open");
      }

      $(function() {
        $("#new-expense-dialog").dialog({
          autoOpen: false,
          resizable: false,
          draggable: false,
          height: 300,
          width: 693,
          position: { my: "left top", at: "left bottom", of: "#new-expense" }});
      });

    </script>

    <style type="text/css">
      li.cmonth > em {
        font-weight:bold;
      }

      li.cmonth > p {
        line-height: 0.5;
        text-indent:1em;
      }

      .col-red {
        color:#FF0000;
      }

      .col-green {
        color:#00FF00;
      }

      .btn-margin {
        margin-bottom: 20px;
      }
    </style>

  </head>

  <body>

    <div class="container">
      <div class="row">
        <div class="page-header pagination-centered">
          <h1>Finance Buddy <small>Personal finance is fun! :)</small></h1>
        </div>
        <div class="span3">
          <div class="row">
            <div class="well">
              <ul class="nav nav-list">
                <li class="nav-header">Navigation</li>
                <li id="nav-details" class="active"><a href="#" onclick="onDetailsClick()">Details</a></li>
                <li id="nav-overview"><a href="#" onclick="onOverviewClick()">Overview</a></li>
                <li id="nav-schedule"><a href="#" onclick="onScheduleClick()">Schedule</a></li>
                <li id="nav-settings"><a href="#" onclick="onSettingsClick()">Settings</a></li>
                <li><a href="login.html">Log Out</a></li>
              </ul>
            </div>
          </div>

          <!-- The search navbar entry. -->

          <div id="navbar-search" class="row">
            <div class="well">
              <ul class="nav nav-list">
                <li class="nav-header">Search</li>
                <li>
                <div class="input-append">
                  <form class="navbar-search">
                    <input type="text" style="width: 130px"/>
                    <a class="btn" href="#"><i class="icon-search"></i></a>
                  </form>
                </div>
                </li>
                <li><a id="advanced-search" href="#" onclick="onAdvancedSearchClick()" >Advanced...</a></li>
              </ul>
            </div>
          </div>

          <!-- The overview configuration. -->

          <div id="navbar-overview-config" class="row" style="display: none">
            <div class="well">
              <ul class="nav nav-list">
                <li class="nav-header">Category</li>
                <li>
                <select name="selectedCategory" id="selectedCategory" class="span2" onchange="selectCategory()">
                  <option>All</option>
                  <option>Rent</option>
                  <option>Power</option>
                  <option>Heating</option>
                  <option>Water</option>
                  <option>Food</option>
                  <option>Misc Stuff</option>
                </select>
                </li>
                <form>
                  <li><input type="radio" name="optionRadios" id="optionSideBySide" value="optionSideBySide" checked onclick="onOverviewConfigClick()" /> Side by side</li>
                  <li><input type="radio" name="optionRadios" id="optionOneAboveTheOther" value="optionOneAboveTheOther" onclick="onOverviewConfigClick()" /> One above the other</li>
                </form>
                <table>
                  <tr>
                    <td><li class="nav-header">From</li></td>
                    <td><li class="nav-header">To</li></td>
                  </tr>
                  <tr>
                    <td>
                      <input class="input-block-level" id="periodFrom" type="text" value="10/01/2012" />
                    </td>
                    <td>
                      <input class="input-block-level" id="periodTo" type="text" value="10/31/2012" />
                    </td>
                  </tr>
                </table>
              </ul>
            </div>
          </div>

          <div class="row">
            <div class="well">
              <ul class="nav nav-list">
                <li class="nav-header">October 2012</li>
                <li class="cmonth"><em>Money left:</em>
                <p>44.88 &euro;</p>
                <p>(3% of Budget)</p></li>
                <li class="cmonth"><em>Expenses:</em>
                <p>1.455,12 &euro;</p>
                <p>(97% of Budget)</p></li>
                <li class="cmonth"><em>Limit:</em>
                <p>1.500 &euro;</p></li>
                <li class="cmonth"><em>Deviation (previous):</em>
                <p class="col-red">-222.88 &euro; (-13%)</p></li>
                <li class="cmonth"><em>Deviation (average):</em>
                <p class="col-green">+128.42 &euro; (+2%)</p></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- The details main screen. -->

        <div id="details-main" class="span9" style="display: block">

          <button id="new-expense" onclick="onNewExpenseClick()" class="btn btn-block btn-large btn-primary btn-margin">Add New Expense</button>

          <table class="table table-bordered">
            <caption></caption>
            <thead>
              <tr>
                <th>Description</th>
                <th>Category</th>
                <th>Date</th>
                <th>Created on</th>
                <th>Interval</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <script language="javascript">
                var parts = window.location.search.substr(1).split("&");
                var $_GET = {};
                for (var i = 0; i < parts.length; i++) {
                  var temp = parts[i].split("=");
                  $_GET[decodeURIComponent(temp[0])] = decodeURIComponent(temp[1]);
                }

                var curDate = new Date();
                if (typeof $_GET['newExpenseAmount'] != 'undefined') {
                  document.write("<tr class=\"error\"><td>"+$_GET['newExpenseDesc']+
                      "</td><td>"+$_GET['newExpenseCategory']+
                      "</td><td>"+$_GET['newExpenseDate']+
                      "</td><td>"+(curDate.getMonth()+1)+"/"+curDate.getDate()+"/"+curDate.getFullYear()+
                      "</td><td>"+$_GET['newExpenseInterval']+
                      "</td><td>"+$_GET['newExpenseAmount']+" &euro;</td></tr>");
                }
              </script>
              <tr class="error">
                <td>Miete</td>
                <td>Miete</td>
                <td>10.09.2012</td>
                <td>01.06.2012</td>
                <td>none</td>
                <td>200 &euro;</td>
              </tr>
              <tr>
                <td>Gaming-PC</td>
                <td>Miscellaneous</td>
                <td>08.10.2012</td>
                <td>08.10.2012</td>
                <td>none</td>
                <td>200 &euro;</td>
              </tr>
              <tr>
                <td>Strom</td>
                <td>Strom</td>
                <td>07.09.2012</td>
                <td>01.06.2012</td>
                <td>none</td>
                <td>200 &euro;</td>
              </tr>
              <tr>
                <td>Gas</td>
                <td>Gas</td>
                <td>01.09.2012</td>
                <td>01.06.2012</td>
                <td>none</td>
                <td>200 &euro;</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- The settings main screen. -->

        <div id="settings-main" class="span9" style="display: none">
          <div class="well">
            <ul class="inline">
              <li>Currency</li>
              <li>
              <select id="currencySelect" class="span3" onfocus="clearAlertSuccess()">
                <option>Euro</option>
                <option>Dollar</option>
                <option>Pound</option>
              </select>
              </li>
              <li>Budget limit</li>
              <li><input id="inputBudgetLimit" type="text" required value="1500.00" onkeyup="checkBudgetLimitInput()" onclick="checkBudgetLimitInput()" /></li>
            </ul>
            <button onclick="onSaveSettingsClick()" class="btn btn-block btn-primary" type="button">Save Settings</button>
          </div>

          <!-- Conditionally shown -->
          <div id="alert-success" class="alert alert-success" style="display: none">
            <strong>Success!</strong> You have successfully changed your settings.
          </div>

          <!-- Conditionally shown -->
          <div id="alert-error-field-is-empty" class="alert alert-error" style="display: none">
            <strong>Error!</strong> Please fill in 'Budgetlimit'.
          </div>

          <!-- Conditionally shown -->
          <div id="alert-error-field-is-not-a-number" class="alert alert-error" style="display: none">
            <strong>Error!</strong> Budgetlimit must be a number.
          </div>

          <!-- Conditionally shown -->
          <div id="alert-error-field-is-shorter-zero" class="alert alert-error" style="display: none">
            <strong>Error!</strong> Budgetlimit must be equal or greater 0.
          </div>
        </div>

        <!-- The details main screen. -->

        <div id="schedule-main" class="span9" style="display: none">
          <h4>Scheduled expenses</h4>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Description</th>
                <th>Category</th>
                <th>Start Date</th>
                <th>Next Date</th>
                <th>Created on</th>
                <th>Interval</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Miete</td>
                <td>Miete</td>
                <td>10.11.2012</td>
                <td>10.06.2012</td>
                <td>01.06.2012</td>
                <td>monthly</td>
                <td>200 &euro;</td>
              </tr>
              <tr>
                <td>Strom</td>
                <td>Strom</td>
                <td>07.11.2012</td>
                <td>07.06.2012</td>
                <td>01.06.2012</td>
                <td>monthly</td>
                <td>200 &euro;</td>
              </tr>
              <tr>
                <td>Gas</td>
                <td>Gas</td>
                <td>01.11.2012</td>
                <td>01.06.2012</td>
                <td>01.06.2012</td>
                <td>monthly</td>
                <td>200 &euro;</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- The overview main screen. -->

        <div id="overview-main" class="span9" style="display: none">
          <div class="well">
            <div>
              <img id="picture_1" src="../img/uebersicht_oneAboveTheOther.gif" class="image-rounded" style="display: none">
              <img id="picture_2" src="../img/uebersicht_sideBySide.gif" class="image-rounded" style="display: block">
            </div>
          </div>
        </div>

        <!-- The new expense dialog. -->

        <form id="new-expense-dialog" action="main.html" method="get">
          <h4>New Expense</h4>
          <table class="table table-bordered">
            <tr>
              <th>Description</th>
              <th>Category</th>
              <th>Date</th>
              <th>Interval</th>
              <th>Amount</th>
            </tr>
            <tr>
              <td><input type="text" placeholder="Description" class="input-block-level" id="newExpenseDesc" name="newExpenseDesc"/></td>
              <td><input type="text" placeholder="Category" class="input-block-level" id="newExpenseCategory" name="newExpenseCategory" data-provide="typeahead" data-items="6"/></td>
              <td><input type="text" placeholder="Date" class="input-block-level" id="newExpenseDate" name="newExpenseDate"/></td>
              <td>
                <select class="span2" name="newExpenseInterval">
                  <option>none</option>
                  <option>yearly</option>
                  <option>monthly</option>
                  <option>weekly</option>
                  <option>daily</option>
                </select>
              </td>
              <td><input type="text" placeholder="Amount" class="input-block-level"id="newExpenseAmount" name="newExpenseAmount"/></td>
            </tr>
          </table>

          <!-- Conditionally shown. -->

          <div id="alert-error-new-expense" class="alert alert-error" style="display: none">
            <strong>Error!</strong> Please enter a description, category, date, interval and amount.
          </div>

          <button onclick="onNewEntry()" class="btn btn-block btn-large btn-primary btn-margin">Submit</button>

        </form>


        <!-- The advanced search dialog. -->

        <div id="advanced-search-dialog">
          This dialog is here to display advanced search options.
          We can put any controls we want into this div.
          For more information, see http://jqueryui.com/dialog/#modal-form
        </div>
      </div>
    </div>

  </body>
</html>

<!-- vim: set ts=2 sw=2 et: -->
